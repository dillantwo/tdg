<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ†æ•¸æŠ«è–©è¦–è¦ºåŒ–</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f0f0;
            padding: 20px;
        }
        .pizza-container {
            margin: 20px auto;
            display: inline-block;
        }
        #pizza-svg {
            border-radius: 50%;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            border: 5px solid #8B4513;  /* æŠ«è–©é‚Šæ¡† */
        }
        .label {
            margin-top: 20px;
            font-size: 24px;
            color: #333;
        }
        .explanation {
            margin-top: 10px;
            font-size: 16px;
            color: #666;
        }
        .usage {
            margin-top: 30px;
            font-size: 14px;
            color: #888;
        }
        .question {
            margin-top: 30px;
            font-size: 20px;
            color: #333;
            font-weight: bold;
            padding: 15px;
            background-color: #fff;
            border-radius: 10px;
            display: inline-block;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <h1>å­¸ç¿’åˆ†æ•¸ï¼šæŠ«è–©ä¾‹å­</h1>
    <p id="description">é€™å€‹æŠ«è–©è¢«åˆ†æˆ7ç­‰ä»½ï¼ˆåˆ†æ¯=7ï¼‰ï¼Œåƒæ‰äº†2ä»½ï¼ˆåˆ†å­=2ï¼‰ã€‚åƒæ‰çš„éƒ¨åˆ†ç”¨ç´…è‰²è¡¨ç¤ºï¼Œå‰©é¤˜çš„éƒ¨åˆ†ç”¨é»ƒè‰²è¡¨ç¤ºã€‚</p>
    
    <div class="pizza-container">
        <svg width="300" height="300" viewBox="0 0 300 300" id="pizza-svg"></svg>
    </div>
    
    <div class="label" id="label">ğŸ• 2/7 çš„æŠ«è–©å·²è¢«åƒæ‰</div>
    
    <div class="question" id="question">
        é‚„å‰©ä¸‹å¤šå°‘å¡Šï¼Ÿè«‹ç”¨åˆ†æ•¸è¡¨ç¤ºæ˜¯å¹¾åˆ†ä¹‹å¹¾ã€‚
    </div>
    
    <script>
        function getUrlParameter(name) {
            const url = new URL(window.location.href);
            return parseInt(url.searchParams.get(name)) || null;
        }

        function updatePizza(numerator, denominator) {
            if (!numerator || !denominator || numerator > denominator || denominator <= 0 || numerator < 0) {
                numerator = 2;
                denominator = 7;
            }

            const pizzaContainer = document.querySelector('.pizza-container');
            pizzaContainer.innerHTML = '<svg width="300" height="300" viewBox="0 0 300 300" id="pizza-svg"></svg>';
            const svg = document.getElementById('pizza-svg');

            const centerX = 150;
            const centerY = 150;
            const radius = 145;  // ç¨å°ä»¥ç•™é‚Šè·çµ¦é‚Šæ¡†

            const sliceAngle = 360 / denominator;
            let currentAngle = 0;

            // å…ˆæ·»åŠ æ‰€æœ‰åˆ‡ç‰‡ï¼ˆåˆå§‹å…¨é»ƒè‰²ï¼Œæ¨¡æ“¬åˆ‡å®Œï¼‰
            for (let i = 0; i < denominator; i++) {
                const color = (i < numerator) ? 'red' : 'yellow';  // åƒæ‰çš„å‰nå€‹è®Šç´…è‰²

                const startAngle = currentAngle;
                const endAngle = currentAngle + sliceAngle;
                const startRad = (startAngle * Math.PI / 180) - Math.PI / 2;  // å¾é ‚éƒ¨é–‹å§‹
                const endRad = (endAngle * Math.PI / 180) - Math.PI / 2;

                const x1 = centerX + radius * Math.cos(startRad);
                const y1 = centerY + radius * Math.sin(startRad);
                const x2 = centerX + radius * Math.cos(endRad);
                const y2 = centerY + radius * Math.sin(endRad);

                const largeArcFlag = (sliceAngle > 180) ? 1 : 0;
                const pathData = `M ${centerX} ${centerY} L ${x1} ${y1} A ${radius} ${radius} 0 ${largeArcFlag} 1 ${x2} ${y2} Z`;

                const sector = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                sector.setAttribute('d', pathData);
                sector.setAttribute('fill', color);
                sector.setAttribute('stroke', 'black');
                sector.setAttribute('stroke-width', '2');
                svg.appendChild(sector);

                currentAngle += sliceAngle;
            }

            // æ·»åŠ å¤–åœˆé‚Šæ¡†
            const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            circle.setAttribute('cx', centerX);
            circle.setAttribute('cy', centerY);
            circle.setAttribute('r', radius + 5);  // ç•¥å¤§æ–¼åŠå¾‘ä»¥è¦†è“‹é‚Šæ¡†
            circle.setAttribute('fill', 'none');
            circle.setAttribute('stroke', '#8B4513');
            circle.setAttribute('stroke-width', '5');
            svg.appendChild(circle);

            const description = document.getElementById('description');
            const label = document.getElementById('label');

            description.textContent = `é€™å€‹æŠ«è–©è¢«åˆ†æˆ${denominator}ç­‰ä»½ï¼ˆåˆ†æ¯=${denominator}ï¼‰ï¼Œåƒæ‰äº†${numerator}ä»½ï¼ˆåˆ†å­=${numerator}ï¼‰ã€‚åƒæ‰çš„éƒ¨åˆ†ç”¨ç´…è‰²è¡¨ç¤ºï¼Œå‰©é¤˜çš„éƒ¨åˆ†ç”¨é»ƒè‰²è¡¨ç¤ºã€‚`;
            label.textContent = `ğŸ• ${numerator}/${denominator} çš„æŠ«è–©å·²è¢«åƒæ‰`;
        }

        // åˆå§‹åŒ–
        const num = getUrlParameter('numerator');
        const den = getUrlParameter('denominator');
        updatePizza(num, den);
    </script>
</body>
</html>
